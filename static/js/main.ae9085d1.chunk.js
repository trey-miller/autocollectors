(this.webpackJsonpautocollectors=this.webpackJsonpautocollectors||[]).push([[0],{20:function(e,t,n){e.exports=n(33)},25:function(e,t,n){},26:function(e,t,n){},3:function(e,t,n){e.exports={root:"Game_root__2VenW",controls:"Game_controls__2cTjf",grid:"Game_grid__zZH6q",row:"Game_row__1uA0V",block:"Game_block__3C-M9",blockColor:"Game_blockColor__2SBPn",reachable:"Game_reachable__3vy7J",success:"Game_success__2fBGb",gridCanvasContainer:"Game_gridCanvasContainer__1Vk0G",gridCanvas:"Game_gridCanvas__2zrqb"}},33:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),l=n(8),o=n.n(l),u=n(16),i=(n(25),n(26),n(7)),s=n(2),f=n(3),b=n.n(f),m=n(5),d=s.c;!function(e){e.Canvas="Canvas",e.Dom="Dom"}(a||(a={}));var h=function(e,t){return{blocks:Object(m.range)(t).map((function(t){return Object(m.range)(e).map((function(e){return{x:e,y:t,stuff:10,reachable:0===t&&0===e}}))})),collectibleBlocks:[{x:0,y:0}],stuff:0,speed:1,gridType:a.Canvas}},v=function(){return h(20,20)},E=n(34);var g=function(e){return function(t,n){t({type:"COLLECT",payload:e});var a=n().blocks[e.y][e.x];0===a.stuff&&t({type:"SEARCH",payload:a})}},p=n(35);function O(){var e=Object(s.b)(),t=Object(s.d)(),n=Object(r.useRef)(null),a=Object(p.a)(),l=Object(r.useState)(a),o=Object(i.a)(l,2),u=o[0],f=o[1];Object(r.useEffect)((function(){if(null!=n.current){var e=window.devicePixelRatio;f({width:n.current.offsetWidth*e,height:n.current.offsetHeight*e})}}),[a.width,a.height]),Object(E.a)((function(){if(null!=n.current){var e=n.current.getContext("2d");if(null!=e){e.clearRect(0,0,n.current.width,n.current.height),e.fillStyle="white",e.fillRect(0,0,n.current.width,n.current.height);for(var a=t.getState().blocks,r=n.current.height/a.length,c=0;c<a.length;c++)for(var l=n.current.width/a[c].length,o=0;o<a[c].length;o++){var u=a[o][c],i=o*l,s=c*r;if(u.stuff>0){var f=u.stuff/10,b=f*l,m=f*r,d=s+(l-b)/2,h=i+(r-m)/2;e.fillStyle=u.reachable?"#421":"#222",e.fillRect(d,h,b,m)}e.fillStyle="black",e.lineWidth=1,e.strokeRect(s,i,l,r)}}}}));var m=Object(r.useCallback)((function(a){var r,c=null===(r=n.current)||void 0===r?void 0:r.getBoundingClientRect();if(null!=c){var l=a.clientX-c.left,o=a.clientY-c.top,u=t.getState().blocks,i=Math.floor(o*u.length/c.height);if(!(i>=u.length)){var s=Math.floor(l*u[i].length/c.height);s>=u[i].length||e(g({y:i,x:s}))}}}),[e,t]);return c.a.createElement("div",{className:b.a.gridCanvasContainer},c.a.createElement("canvas",{className:b.a.gridCanvas,width:u.width,height:u.height,ref:n,onClick:m}))}function j(){var e=d((function(e){return e.blocks.length})),t=Object(r.useMemo)((function(){return Object(m.range)(e)}),[e]);return c.a.createElement("div",{className:b.a.grid},t.map((function(e){return c.a.createElement(k,{key:e,y:e})})))}function k(e){var t=e.y,n=d((function(e){return e.blocks[t].length})),a=Object(r.useMemo)((function(){return Object(m.range)(n)}),[n]);return c.a.createElement("div",{className:b.a.row},a.map((function(e){return c.a.createElement(y,{key:e,x:e,y:t})})))}function y(e){var t=e.x,n=e.y,a=d((function(e){return e.blocks[n][t]})),l=Object(s.b)(),o=Object(r.useCallback)((function(){return a.stuff>0&&l(g(a))}),[l,a]),u=Object(r.useMemo)((function(){return Math.floor(100*a.stuff/10)+"%"}),[a.stuff]);return c.a.createElement("div",{className:"".concat(b.a.block," ").concat(a.reachable?b.a.reachable:""),onClick:o},c.a.createElement("div",{className:b.a.blockColor,style:{height:u,width:u}}))}function _(){var e=d((function(e){return e.gridType}));return c.a.createElement("div",{className:b.a.root},c.a.createElement(C,null),c.a.createElement("div",{className:b.a.controls},c.a.createElement(S,null),c.a.createElement(w,null),c.a.createElement(T,null)),c.a.createElement(R,null),c.a.createElement(N,null),e===a.Canvas?c.a.createElement(O,null):c.a.createElement(j,null))}function C(){var e=Object(s.b)(),t=d((function(e){return e.speed}));return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/30,n=Object(r.useRef)(0),a=Object(r.useRef)(0),c=Object(r.useMemo)((function(){return 10*t}),[t]);Object(E.a)((function(r){0===n.current&&(n.current=r);var l=r-n.current;for(n.current=r,a.current+=l,a.current>c&&(a.current=c);a.current>=t;)e(t),a.current-=t}))}((function(){return e((function(e,t){var n=t().collectibleBlocks;if(n.length>0){var a=n[Math.floor(Math.random()*n.length)];e(g(a))}}))}),Object(r.useMemo)((function(){return 1e3/t}),[t])),null}function S(){var e=d((function(e){return e.blocks.length}),(function(){return!1})),t=Object(s.b)(),n=Object(r.useState)(e),a=Object(i.a)(n,2),l=a[0],o=a[1],u=Object(r.useState)(!1),f=Object(i.a)(u,2),b=f[0],m=f[1],h=Object(r.useCallback)((function(e){var t=e.target.value,n=parseInt(t,10);n>0&&o(n),m(isNaN(n)||n<1)}),[]),v=Object(r.useCallback)((function(){return!b&&t({type:"RESET_GAME",payload:{size:l}})}),[t,b,l]);return c.a.createElement("p",null,c.a.createElement("span",null,"Size"),c.a.createElement("input",{type:"number",min:1,defaultValue:String(l),onChange:h,required:!0,pattern:"[1-9][0-9]*"}),c.a.createElement("button",{disabled:b,onClick:v},"Reset"))}function w(){var e=Object(s.b)(),t=d((function(e){return e.speed})),n=Object(r.useCallback)((function(t){var n=t.target.valueAsNumber;n>0&&e(function(e){return{type:"SET_SPEED",payload:e}}(n))}),[e]);return c.a.createElement("p",null,c.a.createElement("span",null,"Speed"),c.a.createElement("input",{type:"number",min:1,defaultValue:String(t),onChange:n,required:!0,pattern:"[1-9][0-9]*"}),c.a.createElement("span",null,"\xa0ticks/sec"))}function T(){var e=d((function(e){return e.gridType})),t=Object(s.b)(),n=Object(r.useCallback)((function(e){t(function(e){return{type:"SET_GRID_TYPE",payload:e}}(e.target.value))}),[t]);return c.a.createElement("p",null,c.a.createElement("span",null,"Grid Render Type"),c.a.createElement("label",null,c.a.createElement("input",{type:"radio",name:"grid-type",value:a.Canvas,checked:e===a.Canvas,onChange:n}),"Canvas"),c.a.createElement("label",null,c.a.createElement("input",{type:"radio",name:"grid-type",value:a.Dom,checked:e===a.Dom,onChange:n}),"Dom"))}function R(){var e=d((function(e){return e.stuff}));return c.a.createElement("p",null,"Collected stuff: ",c.a.createElement("strong",null,e))}function N(){return d((function(e){return 0===e.collectibleBlocks.length}))?c.a.createElement("p",{className:b.a.success},"All stuff collected!"):null}var G=function(){return c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},"Auto Collectors - Work in Progress"),c.a.createElement(_,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=n(4),x=n(1),B=n(10),D=function(e,t,n,a){return e.map((function(e,r){return r===t?e.map((function(e,t){return t===n?a:e})):e}))};function A(e,t){var n=t.x,a=t.y,r=e.blocks[a][n];if(r.stuff<=0)return e;var c=Object(x.a)(Object(x.a)({},r),{},{stuff:r.stuff-1,reachable:!0}),l=c.stuff<=0;return Object(x.a)(Object(x.a)({},e),{},{blocks:D(e.blocks,a,n,c),collectibleBlocks:l?e.collectibleBlocks.filter((function(e){return e.x!==n||e.y!==a})):r.reachable?e.collectibleBlocks:[].concat(Object(B.a)(e.collectibleBlocks),[{x:n,y:a}]),stuff:e.stuff+1})}function P(e,t,n){if(t<0||t>=e.blocks.length||n<0||n>=e.blocks.length)return e;var a=e.blocks[t][n];return a.reachable?e:Object(x.a)(Object(x.a)({},e),{},{blocks:D(e.blocks,t,n,Object(x.a)(Object(x.a)({},a),{},{reachable:!0})),collectibleBlocks:[].concat(Object(B.a)(e.collectibleBlocks),[{x:n,y:t}])})}function V(e,t){var n=t.x,a=t.y;return e.blocks[a][n].stuff>0?e:(e=P(e,a+1,n),e=P(e,a-1,n),e=P(e,a,n+1),e=P(e,a,n-1))}var I=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):M.c)(Object(M.a)(u.a)),L=Object(M.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v(),t=arguments.length>1?arguments[1]:void 0;if(!t)return e;switch(t.type){case"COLLECT":return A(e,t.payload);case"SEARCH":return V(e,t.payload);case"RESET_GAME":var n=t.payload.size;return Object(x.a)(Object(x.a)({},h(n,n)),{},{speed:e.speed,gridType:e.gridType});case"SET_SPEED":return Object(x.a)(Object(x.a)({},e),{},{speed:t.payload});case"SET_GRID_TYPE":return Object(x.a)(Object(x.a)({},e),{},{gridType:t.payload});default:return e}}),I);o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(s.a,{store:L},c.a.createElement(G,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.ae9085d1.chunk.js.map